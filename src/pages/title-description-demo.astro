---
import BaseLayout from "../layouts/BaseLayout.astro";
import TitleDescriptionManager from "../components/TitleDescriptionManager.astro";
import { 
  TitleStrategy, 
  DescriptionStrategy, 
  TitleDescriptionAnalyzer 
} from "../utils/title-description-strategies";

// Demo data for different page types
const demoPages = [
  {
    pageType: "homepage" as const,
    baseTitle: "Premier Flight Training School",
    baseDescription: "Professional flight training in Reno, Nevada",
    customKeywords: ["best flight school", "certified instructors", "aviation education"]
  },
  {
    pageType: "programs" as const,
    baseTitle: "Flight Training Programs",
    baseDescription: "Comprehensive pilot training programs",
    customKeywords: ["private pilot", "instrument rating", "commercial pilot"]
  },
  {
    pageType: "discovery" as const,
    baseTitle: "Discovery Flight Experience",
    baseDescription: "Try flying with a professional instructor",
    customKeywords: ["intro flight", "first flying lesson", "trial flight"]
  },
  {
    pageType: "about" as const,
    baseTitle: "About Our Flight School",
    baseDescription: "Learn about our experienced flight training team",
    customKeywords: ["experienced instructors", "flight school history", "aviation expertise"]
  },
  {
    pageType: "contact" as const,
    baseTitle: "Contact NV Flight",
    baseDescription: "Get in touch for flight training information",
    customKeywords: ["contact flight school", "flight training info", "aviation consultation"]
  },
  {
    pageType: "blog" as const,
    baseTitle: "Aviation Blog",
    baseDescription: "Flight training tips and aviation insights",
    customKeywords: ["pilot tips", "aviation news", "flight training articles"]
  }
];

// Generate demonstrations for each page type
const demonstrations = demoPages.map(page => {
  const optimizedTitle = TitleStrategy.generateTitle(page.pageType, {
    customTitle: page.baseTitle,
    keywords: page.customKeywords,
    location: "Reno, NV",
    brand: "NV Flight",
  });

  const optimizedDescription = DescriptionStrategy.generateDescription(page.pageType, {
    customDescription: page.baseDescription,
    keywords: page.customKeywords,
    location: "Reno, NV",
    brand: "NV Flight",
  });

  const titleAnalysis = TitleDescriptionAnalyzer.analyzeTitle(optimizedTitle, page.customKeywords);
  const descriptionAnalysis = TitleDescriptionAnalyzer.analyzeDescription(optimizedDescription, page.customKeywords);
  const variations = TitleDescriptionAnalyzer.generateVariations(page.pageType, page.customKeywords, 3);

  return {
    ...page,
    optimizedTitle,
    optimizedDescription,
    titleAnalysis,
    descriptionAnalysis,
    variations,
  };
});

const pageTitle = "Title & Description Strategy Demo | NV Flight";
const pageDescription = "Demonstration of advanced SEO title and description generation strategies with real-time analysis and optimization recommendations.";
---

<BaseLayout
  siteTitle={pageTitle}
  siteDescription={pageDescription}
  pageType="blog"
  enableAdvancedTitleStrategy={true}
  enableKeywordOptimization={true}
>
  <div class="min-h-screen bg-gray-50 py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h1 class="text-4xl font-bold text-gray-900 mb-4">
          Title & Description Strategy Demo
        </h1>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">
          Advanced SEO optimization strategies for generating high-performing page titles and meta descriptions.
          Each example shows original input, optimized output, quality analysis, and A/B testing variations.
        </p>
      </div>

      <!-- Strategy Overview -->
      <div class="bg-white rounded-lg shadow-lg p-8 mb-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-6">Strategy Overview</h2>
        <div class="grid md:grid-cols-3 gap-6">
          <div class="text-center p-6 bg-blue-50 rounded-lg">
            <div class="text-3xl text-blue-600 mb-4">ðŸŽ¯</div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">Title Optimization</h3>
            <p class="text-gray-600">Strategic keyword placement, length optimization, and brand integration</p>
          </div>
          <div class="text-center p-6 bg-green-50 rounded-lg">
            <div class="text-3xl text-green-600 mb-4">ðŸ“„</div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">Description Enhancement</h3>
            <p class="text-gray-600">Template-based generation with call-to-action integration</p>
          </div>
          <div class="text-center p-6 bg-purple-50 rounded-lg">
            <div class="text-3xl text-purple-600 mb-4">ðŸ“Š</div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">Real-time Analysis</h3>
            <p class="text-gray-600">Quality scoring with actionable recommendations</p>
          </div>
        </div>
      </div>

      <!-- Page Type Demonstrations -->
      <div class="space-y-8">
        {demonstrations.map((demo) => (
          <div class="bg-white rounded-lg shadow-lg overflow-hidden">
            <div class="bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-4">
              <h3 class="text-xl font-bold text-white capitalize">
                {demo.pageType} Page Strategy
              </h3>
            </div>
            
            <div class="p-6">
              <!-- Input vs Output -->
              <div class="grid md:grid-cols-2 gap-6 mb-6">
                <div>
                  <h4 class="text-lg font-semibold text-gray-900 mb-3">Original Input</h4>
                  <div class="bg-gray-50 p-4 rounded-lg space-y-3">
                    <div>
                      <span class="text-sm font-medium text-gray-600">Title:</span>
                      <div class="text-gray-900 mt-1">{demo.baseTitle}</div>
                    </div>
                    <div>
                      <span class="text-sm font-medium text-gray-600">Description:</span>
                      <div class="text-gray-900 mt-1">{demo.baseDescription}</div>
                    </div>
                    <div>
                      <span class="text-sm font-medium text-gray-600">Keywords:</span>
                      <div class="text-gray-900 mt-1">{demo.customKeywords.join(", ")}</div>
                    </div>
                  </div>
                </div>

                <div>
                  <h4 class="text-lg font-semibold text-gray-900 mb-3">Optimized Output</h4>
                  <div class="bg-green-50 p-4 rounded-lg space-y-3">
                    <div>
                      <span class="text-sm font-medium text-gray-600">Title ({demo.optimizedTitle.length} chars):</span>
                      <div class="text-gray-900 mt-1 font-medium">{demo.optimizedTitle}</div>
                    </div>
                    <div>
                      <span class="text-sm font-medium text-gray-600">Description ({demo.optimizedDescription.length} chars):</span>
                      <div class="text-gray-900 mt-1">{demo.optimizedDescription}</div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Analysis Results -->
              <div class="grid md:grid-cols-2 gap-6 mb-6">
                <div>
                  <h4 class="text-lg font-semibold text-gray-900 mb-3">
                    Title Analysis 
                    <span class={`inline-block px-2 py-1 text-sm rounded-full ml-2 ${
                      demo.titleAnalysis.score >= 80 ? 'bg-green-100 text-green-800' : 
                      demo.titleAnalysis.score >= 60 ? 'bg-yellow-100 text-yellow-800' : 
                      'bg-red-100 text-red-800'
                    }`}>
                      {demo.titleAnalysis.score}/100
                    </span>
                  </h4>
                  <div class="space-y-2">
                    {demo.titleAnalysis.strengths.length > 0 && (
                      <div>
                        <span class="text-sm font-medium text-green-600">Strengths:</span>
                        <ul class="text-sm text-gray-700 mt-1 ml-4">
                          {demo.titleAnalysis.strengths.map((strength) => (
                            <li class="flex items-center">
                              <span class="text-green-500 mr-2">âœ“</span>
                              {strength}
                            </li>
                          ))}
                        </ul>
                      </div>
                    )}
                    {demo.titleAnalysis.recommendations.length > 0 && (
                      <div>
                        <span class="text-sm font-medium text-blue-600">Recommendations:</span>
                        <ul class="text-sm text-gray-700 mt-1 ml-4">
                          {demo.titleAnalysis.recommendations.map((rec) => (
                            <li class="flex items-center">
                              <span class="text-blue-500 mr-2">â†’</span>
                              {rec}
                            </li>
                          ))}
                        </ul>
                      </div>
                    )}
                  </div>
                </div>

                <div>
                  <h4 class="text-lg font-semibold text-gray-900 mb-3">
                    Description Analysis 
                    <span class={`inline-block px-2 py-1 text-sm rounded-full ml-2 ${
                      demo.descriptionAnalysis.score >= 80 ? 'bg-green-100 text-green-800' : 
                      demo.descriptionAnalysis.score >= 60 ? 'bg-yellow-100 text-yellow-800' : 
                      'bg-red-100 text-red-800'
                    }`}>
                      {demo.descriptionAnalysis.score}/100
                    </span>
                  </h4>
                  <div class="space-y-2">
                    {demo.descriptionAnalysis.strengths.length > 0 && (
                      <div>
                        <span class="text-sm font-medium text-green-600">Strengths:</span>
                        <ul class="text-sm text-gray-700 mt-1 ml-4">
                          {demo.descriptionAnalysis.strengths.map((strength) => (
                            <li class="flex items-center">
                              <span class="text-green-500 mr-2">âœ“</span>
                              {strength}
                            </li>
                          ))}
                        </ul>
                      </div>
                    )}
                    {demo.descriptionAnalysis.recommendations.length > 0 && (
                      <div>
                        <span class="text-sm font-medium text-blue-600">Recommendations:</span>
                        <ul class="text-sm text-gray-700 mt-1 ml-4">
                          {demo.descriptionAnalysis.recommendations.map((rec) => (
                            <li class="flex items-center">
                              <span class="text-blue-500 mr-2">â†’</span>
                              {rec}
                            </li>
                          ))}
                        </ul>
                      </div>
                    )}
                  </div>
                </div>
              </div>

              <!-- A/B Testing Variations -->
              {demo.variations.titles.length > 0 && (
                <div>
                  <h4 class="text-lg font-semibold text-gray-900 mb-3">A/B Testing Variations</h4>
                  <div class="grid md:grid-cols-2 gap-4">
                    <div>
                      <span class="text-sm font-medium text-gray-600">Title Variations:</span>
                      <ul class="mt-2 space-y-1">
                        {demo.variations.titles.map((title, index) => (
                          <li class="text-sm text-gray-700 bg-gray-50 p-2 rounded">
                            <span class="text-gray-500 mr-2">#{index + 1}</span>
                            {title}
                          </li>
                        ))}
                      </ul>
                    </div>
                    <div>
                      <span class="text-sm font-medium text-gray-600">Description Variations:</span>
                      <ul class="mt-2 space-y-1">
                        {demo.variations.descriptions.map((desc, index) => (
                          <li class="text-sm text-gray-700 bg-gray-50 p-2 rounded">
                            <span class="text-gray-500 mr-2">#{index + 1}</span>
                            {desc.length > 80 ? desc.substring(0, 80) + "..." : desc}
                          </li>
                        ))}
                      </ul>
                    </div>
                  </div>
                </div>
              )}
            </div>
          </div>
        ))}
      </div>

      <!-- Implementation Example -->
      <div class="bg-white rounded-lg shadow-lg p-8 mt-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-6">Implementation Example</h2>
        <div class="bg-gray-900 text-gray-100 p-6 rounded-lg overflow-x-auto">
          <pre class="text-sm"><code>{`<BaseLayout
  siteTitle="Flight Training Programs"
  siteDescription="Comprehensive pilot training programs"
  pageType="programs"
  customKeywords={["private pilot", "instrument rating"]}
  enableAdvancedTitleStrategy={true}
>
  <!-- Your page content -->
</BaseLayout>`}</code></pre>
        </div>
        <div class="mt-4 text-sm text-gray-600">
          <p><strong>Result:</strong> Automatic title and description optimization with real-time analysis and scoring.</p>
        </div>
      </div>

      <!-- Performance Metrics -->
      <div class="bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg p-8 mt-8 text-white">
        <h2 class="text-2xl font-bold mb-6">Expected SEO Benefits</h2>
        <div class="grid md:grid-cols-4 gap-6">
          <div class="text-center">
            <div class="text-3xl font-bold mb-2">15-30%</div>
            <div class="text-sm opacity-90">CTR Improvement</div>
          </div>
          <div class="text-center">
            <div class="text-3xl font-bold mb-2">20-40%</div>
            <div class="text-sm opacity-90">Search Visibility</div>
          </div>
          <div class="text-center">
            <div class="text-3xl font-bold mb-2">85+</div>
            <div class="text-sm opacity-90">Average SEO Score</div>
          </div>
          <div class="text-center">
            <div class="text-3xl font-bold mb-2">100%</div>
            <div class="text-sm opacity-90">Coverage Optimization</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Development debugging component for this demo page -->
  <TitleDescriptionManager
    pageType="blog"
    baseTitle={pageTitle}
    baseDescription={pageDescription}
    customKeywords={["SEO demo", "title optimization", "description strategies"]}
    enableAnalysis={true}
    generateVariations={true}
  />
</BaseLayout>

<style>
  /* Additional styles for demo presentation */
  .prose {
    max-width: none;
  }
  
  code {
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  }
</style>
